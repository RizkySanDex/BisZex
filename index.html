<!DOCTYPE html>
<html lang="id">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Aisah Video</title>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">

<style>
*{margin:0;padding:0;box-sizing:border-box}
body{font-family:"Segoe UI",Arial,sans-serif;background:#111;color:#fff}
.container{width:95%;max-width:1200px;margin:20px auto}
header{display:flex;flex-wrap:wrap;align-items:center;justify-content:space-between;gap:10px;margin-bottom:15px}
.logo{display:flex;align-items:center;gap:8px}
.logo i{font-size:1.6rem;color:#ff5314}
.logo h1{font-size:1.2rem;font-weight:700}
.search-bar{flex:1;display:flex;max-width:500px;min-width:180px}
.search-bar input{flex:1;padding:9px 12px;border:1px solid #333;border-radius:6px 0 0 6px;background:#222;color:#fff}
.search-bar button{background:#ff5314;color:white;padding:0 14px;border-radius:0 6px 6px 0;border:none;cursor:pointer}
.nav-links a{margin-left:12px;color:#aaa;text-decoration:none;font-size:0.9rem;cursor:pointer}
.video-grid{display:grid;grid-template-columns:repeat(auto-fill,minmax(160px,1fr));gap:12px}
.video-card{background:#1a1a1a;border-radius:10px;overflow:hidden;transition:.2s;cursor:pointer}
.video-card:hover{transform:translateY(-4px)}
.video-thumb{position:relative;width:100%;aspect-ratio:16/9;background:#222}
.video-thumb img{width:100%;height:100%;object-fit:cover}
.video-info{padding:8px}
.video-info h3{font-size:0.85rem;line-height:1.2;overflow:hidden;height:40px}
.modal{position:fixed;inset:0;background:rgba(0,0,0,.9);display:none;align-items:center;justify-content:center;padding:10px;z-index:1500}
.modal.open{display:flex}
.modal-box{background:#111;width:100%;max-width:1000px;border-radius:12px;overflow:hidden;position:relative;display:flex;flex-direction:column}
.modal-close{position:absolute;top:10px;right:10px;width:35px;height:35px;border-radius:50%;background:rgba(255,83,20,.8);color:white;font-size:20px;display:flex;align-items:center;justify-content:center;cursor:pointer;border:none;z-index:10}
.modal-video-wrap{position:relative;width:100%;aspect-ratio:16/9;background:black}
.modal-video-wrap iframe, .modal-video-wrap video{position:absolute;inset:0;width:100%;height:100%;object-fit:contain;border:0}
.ad-slot{margin:8px 0;text-align:center}
@media(max-width:768px){.video-grid{grid-template-columns:repeat(auto-fill,minmax(140px,1fr))}}
@media(max-width:480px){.video-grid{grid-template-columns:repeat(2,1fr)}}
</style>
</head>
<body>
<div class="container">
  <header>
    <div class="logo"><i class="fas fa-play-circle"></i><h1>Aisah Video</h1></div>
    <div class="search-bar">
      <input id="searchInput" type="text" placeholder="Cari video...">
      <button id="searchBtn"><i class="fas fa-search"></i></button>
    </div>
  </header>

  <!-- HEADER AD 320x50 -->
  <div class="ad-slot">
    <script type="text/javascript">
      atOptions = {
        'key' : 'f911d9fd4c8cadde096c6bfbf9d30630',
        'format' : 'iframe',
        'height' : 50,
        'width' : 320,
        'params' : {}
      };
    </script>
    <script type="text/javascript" src="//www.highperformanceformat.com/f911d9fd4c8cadde096c6bfbf9d30630/invoke.js"></script>
  </div>

  <div id="videoContainer" class="video-grid"></div>
</div>

<!-- MODAL VIDEO -->
<div id="videoModal" class="modal">
  <div class="modal-box">
    <button class="modal-close" id="closeModal">&times;</button>
    <div class="modal-video-wrap" id="modalVideo"></div>
    <!-- MODAL AD 300x250 -->
    <div class="ad-slot">
      <script type="text/javascript">
        atOptions = {
          'key' : 'c4f0b959a9c4b12d8d039c71b3c3e1ec',
          'format' : 'iframe',
          'height' : 250,
          'width' : 300,
          'params' : {}
        };
      </script>
      <script type="text/javascript" src="//www.highperformanceformat.com/c4f0b959a9c4b12d8d039c71b3c3e1ec/invoke.js"></script>
    </div>
  </div>
</div>

<!-- FOOTER AD 320x50 -->
<div class="ad-slot" style="text-align:center;margin:20px 0">
  <script type="text/javascript">
    atOptions = {
      'key' : 'f911d9fd4c8cadde096c6bfbf9d30630',
      'format' : 'iframe',
      'height' : 50,
      'width' : 320,
      'params' : {}
    };
  </script>
  <script type="text/javascript" src="//www.highperformanceformat.com/f911d9fd4c8cadde096c6bfbf9d30630/invoke.js"></script>
</div>

<script>
// ===== CONFIG =====
const BLOG_ID = "4521274187180591519";
const JSONP_URL = `https://www.blogger.com/feeds/${BLOG_ID}/posts/default?alt=json-in-script`;

// ===== CALLBACK JSONP =====
function gdataIoCallback(data){
  const entries = data.feed.entry || [];
  const container = document.getElementById("videoContainer");
  container.innerHTML = "";
  entries.forEach(post=>{
    const title = post.title.$t;
    const content = post.content.$t;
    const doc = new DOMParser().parseFromString(content,"text/html");
    const iframe = doc.querySelector("iframe");
    if(!iframe) return;

    // Ambil thumbnail dari ID video (XVideos / StreamTape)
    let thumb = "https://via.placeholder.com/300x169?text=Video";
    try{
      if(iframe.src.includes("xvideos.com/embedframe")){
        const vidId = iframe.src.split("/")[4];
        thumb = `https://img-cdn.xvideos.com/videos/thumbs/${vidId}.jpg`;
      }
      else if(iframe.src.includes("streamtape.com/e")){
        const parts = iframe.src.split("/");
        const vidId = parts[parts.length-1];
        thumb = `https://images.streamtape.com/thumbs/${vidId}.jpg`;
      }
    }catch(e){ thumb = "https://via.placeholder.com/300x169?text=Video"; }

    const card = document.createElement("div");
    card.className = "video-card";
    card.innerHTML = `<div class="video-thumb"><img src="${thumb}" alt="${title}"></div>
                      <div class="video-info"><h3>${title}</h3></div>`;
    card.onclick = ()=>openModal(iframe.src);
    container.appendChild(card);
  });
}

// ===== MODAL =====
const modal = document.getElementById("videoModal");
const modalVideo = document.getElementById("modalVideo");
function openModal(src){
  modalVideo.innerHTML = `<iframe src="${src}?autoplay=1" allowfullscreen></iframe>`;
  modal.classList.add("open");
}
document.getElementById("closeModal").onclick = ()=>{
  modal.classList.remove("open");
  modalVideo.innerHTML="";
};

// ===== SEARCH =====
document.getElementById("searchBtn").onclick = searchVideos;
document.getElementById("searchInput").addEventListener("keypress", function(e){
  if(e.key==="Enter") searchVideos();
});
function searchVideos(){
  const term = document.getElementById("searchInput").value.toLowerCase();
  const cards = document.querySelectorAll("#videoContainer .video-card");
  cards.forEach(card=>{
    const title = card.querySelector("h3").textContent.toLowerCase();
    card.style.display = title.includes(term) ? "block" : "none";
  });
}

// ===== LOAD JSONP =====
const script = document.createElement("script");
script.src = JSONP_URL + "&callback=gdataIoCallback";
document.body.appendChild(script);
</script>
</body>
</html>
